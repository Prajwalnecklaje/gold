<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracking Consent</title>
    <style>
        #consentBanner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #fff;
            border-top: 1px solid #ddd;
            padding: 10px;
            text-align: center;
            z-index: 1000;
        }
        #consentBanner button {
            margin: 0 5px;
        }
    </style>
</head>
<body>

<div id="consentBanner">
    <p>We use tracking to improve your experience. Do you consent to be tracked?</p>
    <button id="accept">Yes</button>
    <button id="decline">No</button>
</div>

<script>
    // Function to initialize Pendo with optional "Do Not Process" flag
    function initializePendo(doNotProcess) {
        (function(apiKey){
            (function(p,e,n,d,o){
                var v,w,x,y,z;
                o=p[d]=p[d]||{};
                o._q=o._q||[];
                v=['initialize','identify','updateOptions','pageLoad','track'];
                for(w=0,x=v.length;w<x;++w)(function(m){
                    o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
                y=e.createElement(n);
                y.async=!0;
                y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
                z=e.getElementsByTagName(n)[0];
                z.parentNode.insertBefore(y,z);
            })(window,document,'script','pendo');

            // Initialize Pendo with visitor and account data
            pendo.initialize({
                visitor: {
                    id: "id1",               // Replace with dynamic visitor ID if available
                    full_name: "prajwal neclaje",
                    age: 21,
                    language: 'hi'
                },
                account: {
                    id: "ant1",             // Replace with dynamic account ID if available
                    name: "SOFTLAND_ACCOUNT"
                },
                doNotProcess: doNotProcess // Respect user consent
            });
        })('043f5c9d-f8b2-4d0f-7fd8-6020c3074f67');
    }

    // Function to handle user consent
    function handleConsent(consent) {
        if (consent === 'yes') {
            // User consents to being tracked
            initializePendo(false); // Initialize Pendo without "Do Not Process" flag
        } else {
            // User does not consent to being tracked
            initializePendo(true); // Initialize Pendo with "Do Not Process" flag
        }
    }

    // Event listeners for consent buttons
    document.getElementById('accept').addEventListener('click', function() {
        document.getElementById('consentBanner').style.display = 'none';
        handleConsent('yes'); // User accepted tracking
    });

    document.getElementById('decline').addEventListener('click', function() {
        document.getElementById('consentBanner').style.display = 'none';
        handleConsent('no'); // User declined tracking
    });

    // Example logic to check consent status on page load
    // You might use localStorage or cookies to remember user choice
    // For example:
    // const userConsent = localStorage.getItem('userConsent');
    // if (userConsent) {
    //     handleConsent(userConsent);
    // } else {
    //     document.getElementById('consentBanner').style.display = 'block';
    // }
</script>

</body>
</html>
