<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Pendo Embedded Guide Flash â€“ Issue Repro</title>

<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
  }

  #table {
    border: 1px solid #ccc;
    padding: 20px;
    min-height: 80px;
    margin-top: 20px;
  }

  .empty-state {
    color: gray;
  }

  .row {
    color: green;
  }
</style>
</head>

<body>

<h2>Embedded Guide Flash â€“ Issue Reproduction</h2>

<button id="searchBtn">Search (No Results)</button>

<div id="table"></div>

<script>
/* =====================================================
   SIMULATE ANT DESIGN TABLE EMPTY STATE
===================================================== */

// Table renders empty state immediately
const table = document.getElementById('table');
table.innerHTML = `<div class="empty-state">No Data</div>`;

// Simulate async data load (data appears later)
setTimeout(() => {
  table.innerHTML = `<div class="row">Row 1</div>`;
}, 1000);
</script>

<script>
/* =====================================================
   SIMULATE PENDO EMBEDDED GUIDE BEHAVIOR
   (THIS IS WHAT CAUSES THE FLASH)
===================================================== */

function injectEmbeddedGuide() {
  if (document.querySelector('[data-pendo-guide]')) return;

  const guide = document.createElement('div');
  guide.setAttribute('data-pendo-guide', 'true');
  guide.textContent = 'ðŸ“Œ Embedded Guide: No Results Found';
  table.appendChild(guide);
}

// Pendo agent scans DOM immediately
const pendoScan = setInterval(() => {
  if (document.querySelector('.empty-state')) {
    injectEmbeddedGuide();
    clearInterval(pendoScan);
  }
}, 10);
</script>

<script>
/* =====================================================
   USER PERFORMS SEARCH â†’ NO RESULTS
===================================================== */

document.getElementById('searchBtn').onclick = () => {
  table.innerHTML = `
    <div class="empty-state">No search results</div>
  `;
};
</script>
<script src="./pendo/init.js"></script>
</body>
</html>
