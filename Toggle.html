<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pendo Survey Test â€“ Rotating Visitors</title>

  <script>
    // Create 10 fixed visitor IDs
    const visitors = [
      "test_user_01",
      "test_user_02",
      "test_user_03",
      "test_user_04",
      "test_user_05",
      "test_user_06",
      "test_user_07",
      "test_user_08",
      "test_user_09",
      "test_user_10"
    ];

    // Rotate visitor on each refresh
    let index = localStorage.getItem("visitorIndex");
    index = index ? (parseInt(index) + 1) % visitors.length : 0;
    localStorage.setItem("visitorIndex", index);

    const visitorId = visitors[index];
    console.log("Pendo Visitor ID:", visitorId);
  </script>

  <!-- Pendo Snippet -->
  <script>
    (function(apiKey){
      (function(p,e,n,d,o){
        var v,w,x,y,z;o=p[d]=p[d]||{};
        o._q=o._q||[];v=['initialize','identify','updateOptions','pageLoad','track'];
        for(w=0,x=v.length;w<x;++w)(function(m){
          o[m]=o[m]||function(){
            o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));
          };
        })(v[w]);
        y=e.createElement(n);y.async=!0;
        y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
        z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);
      })(window,document,'script','pendo');

      pendo.initialize({
        visitor: {
          id: visitorId
        },
        account: {
          id: "test_account_001"
        }
      });
    })('043f5c9d-f8b2-4d0f-7fd8-6020c3074f67');
  </script>

</head>
<body>

  <h1>Pendo Survey Test Page</h1>
  <p>Refresh the page to simulate a new visitor.</p>
  <p><strong>Current Visitor ID:</strong> <span id="vid"></span></p>

  <script>
    document.getElementById("vid").innerText = visitorId;
  </script>

</body>
</html>
